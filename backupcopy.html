<!DOCTYPE html>
<style>
@import "main.css"
</style>
<title>Amber Lennox's Webpage</title>
<html>
<body onload="savedata()">
<iframe id="header" src="header.htm" frameBorder="0" scrolling="no"></iframe>
<div id="language">
 <ul id="languageul">
  <li class="languageli"><a href="gaelic/cosmeolas.html" class="languagelink"><img src="gaelicflag.png" class="flag"><br> G&agrave;idhlig</a></li>

  <li class="languageli"><a href="cosmology.html" class="languagelink"><img src="englishflag.png" class="flag"><br> English</a></li>
</ul> 
 
</div>
<br>
<meta charset="utf-8">
<div class="main">
<br>
<center>
<div class="mytext">
<h1>Prepositional Pronoun Quiz</h1>




</form>


 <form name="pronounQuiz" onsubmit="return validateAnswer()" action="">
      	<font size="6"><preposition></preposition> + <pronoun></pronoun> = ?</font>
	<br><br>
	<input type="text" name="answer" id="answer" autofocus="autofocus"> <result></result>
	<br>
	<button type="button" onclick="return validateAnswer()">Submit</button> <button type="button" onclick="giveHint()">Hint</button> 
	<font size="3"><hint></hint> </font>
   </form><br>

<button type="button" onclick="return add_a()">à</button>
<button type="button" onclick="return add_e()">è</button>
<button type="button" onclick="return add_i()">ì</button>
<button type="button" onclick="return add_o()">ò</button>
<button type="button" onclick="return add_u()">ù</button>

<br><br>
Current streak: <streak></streak><br>
High Score: <high_score></high_score>
<p><br>
Test me on: <br>
<input type="checkbox" id="aig" onclick="checkBox('aig')"> 
<label for="aig">aig</label> 
<input type="checkbox" id="air" onclick="checkBox('air')"> 
<label for="air">air</label> 
<input type="checkbox" id="ann" onclick="checkBox('ann')"> 
<label for="ainn">ann</label> 
<input type="checkbox" id="as1" onclick="checkBox('as1')"> 
<label for="as1">às</label> 
<input type="checkbox" id="bho" onclick="checkBox('bho')"> 
<label for="bho">bho</label> 
<input type="checkbox" id="de" onclick="checkBox('de')"> 
<label for="de">de</label> <br>
<input type="checkbox" id="do1" onclick="checkBox('do1')"> 
<label for="do1">do/dha</label> 
<input type="checkbox" id="fo" onclick="checkBox('fo')"> 
<label for="fo">fo</label> 
<input type="checkbox" id="gu" onclick="checkBox('gu')"> 
<label for="gu">gu/chun</label> 
<input type="checkbox" id="le" onclick="checkBox('le')"> 
<label for="le">le</label> 
<input type="checkbox" id="mu" onclick="checkBox('mu')"> 
<label for="mu">mu</label><br> 
<input type="checkbox" id="o" onclick="checkBox('o')"> 
<label for="o">o</label> 
<input type="checkbox" id="ri" onclick="checkBox('ri')"> 
<label for="ri">ri</label> 
<input type="checkbox" id="ro" onclick="checkBox('ro')"> 
<label for="ro">ro</label> 
<input type="checkbox" id="thar" onclick="checkBox('thar')"> 
<label for="thar">thar</label> 
<input type="checkbox" id="tro" onclick="checkBox('tro')"> 
<label for="tro">tro</label> 
<br><br>

<test></test>

<br><br>

<script>

function add_a() {
	document.getElementById('answer').value = document.getElementById('answer').value + "à"
}
function add_e() {
	document.getElementById('answer').value = document.getElementById('answer').value + "è"
}
function add_i() {
	document.getElementById('answer').value = document.getElementById('answer').value + "ì"
}
function add_o() {
	document.getElementById('answer').value = document.getElementById('answer').value + "ò"
}
function add_u() {
	document.getElementById('answer').value = document.getElementById('answer').value + "ù"
}

function isCheck() {
	var aig = window.localStorage.getItem('key');
	if (aig == true) {
		document.getElementById("aig").checked = true;
	} else {
		document.getElementById("aig").checked = false;
	}
}

function mysubmit() {
	if (localStorage.getItem('aig') == true) {
		document.getElementById("aig").checked = true;
	};
}


function savedata() {
	//window.var prepositions;
	var all_prepositions = [aig, air, ann, as1, bho, de, do1, fo, gu, le, mu, o, ri, ro, thar, tro];
	var all_strings = ['aig', 'air', 'ann', 'as1', 'bho', 'de', 'do1', 'fo', 'gu', 'le', 'mu', 'o', 'ri', 'ro', 'thar', 'tro'];
	for (i=0; i <all_prepositions.length; i++) {
		console.log(i)
		var data = window.localStorage.getItem(all_strings[i]);
		if (data == 'true') {
			const result = document.querySelector('result');
			document.getElementById(all_strings[i]).checked = true;
			if (! prepositions.includes(all_prepositions[i])) {
				prepositions.push(all_prepositions[i])
				}
		} else {
			document.getElementById(all_strings[i]).checked = false;
			if (prepositions.includes(all_prepositions[i])) {
				var index = prepositions.indexOf(all_prepositions[i])
				prepositions.splice(index, 1)
				}
		}
	}
	// REMOVE THIS
	//const result = document.querySelector('result');
	//result.textContent = prepositions;
	const mystreak = document.querySelector('streak');
	mystreak.textContent = streak;

	const myhigh_score = document.querySelector('high_score');
	myhigh_score.textContent = high_score;

	window.localStorage.setItem('prepositions', prepositions);
	newQuestion()
	return [prepositions];
};

function checkBox(mystring) {
	mybox = document.getElementById(mystring);
        if(mybox.checked == true){
		window.localStorage.setItem(mystring, true);
	} else {
		window.localStorage.setItem(mystring, false);
	}
}



function loaddata() {
	//window.localStorage.setItem('key', 'boo');
        if(document.getElementById('aig').checked){
		window.localStorage.setItem('key', true);
		document.getElementById("aig").checked = true;
	} else {
		window.localStorage.setItem('key', 'false');
	}
}

function addPreposition(myinput) {
	const test = document.querySelector('test');
	test.textContent = myinput;
	prepositions.push(myinput)
};


function validateAnswer() {
	var x = document.forms["pronounQuiz"]["answer"].value;
	//alert("you wrote");
	const result = document.querySelector('result');
	if (x == a[2]) {
		result.style.color = "green"
		result.textContent = "Correct!";
		var audio = new Audio(a[3]);
		audio.play();
		streak++;
		if (streak > high_score) {
			window.localStorage.setItem('high_score', streak)
			}
		window.localStorage.setItem('streak', streak)
		return true;	
	} else {	
		result.style.color = "red"
		result.textContent = "Not quite!";
		streak = 0;
		window.localStorage.setItem('streak', streak)
		return false;
	}
};


function newQuestion() {
	a = getCombo();
	preposition1 = a[0];
	pronoun1 = a[1];
	//global prep_pronoun = a[2]
	const preposition = document.querySelector('preposition');
	preposition.textContent = preposition1;
	const pronoun = document.querySelector('pronoun');
	pronoun.textContent = pronoun1;
};

function giveHint() {
	hintno ++;
	const hint = document.querySelector('hint');
	hint.textContent = a[2].substr(0,hintno);
};

function getCombo() {
   var random_preposition = Math.floor(Math.random() * prepositions.length);
   var random_pronoun = (1 + Math.floor(Math.random() * 7));
   var preposition = prepositions[random_preposition][0];
   //console.log(preposition);
   var pronoun = pronouns[random_pronoun];
   //console.log(pronoun);
   var prep_pronoun = prepositions[random_preposition][random_pronoun];
   //console.log(prep_pronoun);
   var url = ('/pronouns/'+(preposition)+'/'+prep_pronoun+'.mp3');
   //console.log(url);
   return [preposition, pronoun, prep_pronoun, url];
};

var aig = ['aig', 'agam', 'agad', 'aige', 'aice', 'againn', 'agaibh', 'aca'];
var air = ['air', 'orm', 'ort', 'air', 'oirre', 'oirnn', 'oirbh', 'orra'];
var ann = ['ann', 'annam', 'annad', 'ann', 'innte', 'annainn', 'annaibh', 'annta'];
var as1 = ['às', 'asam', 'asad', 'às', 'aiste', 'asainn', 'asaibh', 'asta'];
var bho = ['bho', 'bhuam', 'bhuat', 'bhuaithe', 'bhuaipe', 'bhuainn', 'bhuaibh', 'bhuapa'];
var de = ['de', 'dhìom', 'dhìot', 'dheth', 'dhith', 'dhinn', 'dhibh', 'dhiubh'];
var do1 = ['do', 'dhomh', 'dhut', 'dha', 'dhi', 'dhuinn', 'dhuibh', 'dhaibh'];
var fo = ['fo','fodham', 'fodhad', 'fodha', 'foidhpe', 'fodhainn', 'fodhaibh', 'fodhpa'];
var gu = ['gu', 'thugam', 'thugad', 'thuige', 'thuice', 'thugainn', 'thugaibh', 'thuca'];
var le = ['le', 'leam', 'leat', 'leis', 'leatha', 'leinn', 'leibh', 'leotha'];
var mu = ['mu', 'umam', 'umad', 'uime', 'uimpe', 'umainn', 'umaibh', 'umpa'];
var o = ['o', 'uam', 'uat', 'uaithe', 'uaipe', 'uainn', 'uaibh', 'uapa'];
var ri = ['ri', 'rium', 'riut', 'ris', 'rithe', 'rinn', 'ribh', 'riutha'];
var ro = ['ro', 'romham', 'romhad', 'roimhe', 'roimhpe', 'romhainn', 'romhaibh', 'romhpa'];
var thar = ['thar','tharam', 'tharad', 'thairis', 'thairte', 'tharainn', 'tharaibh', 'tharta'];
var tro = ['tro', 'tromham', 'tromhad', 'troimhe', 'troimhpe', 'tromhainn', 'tromhaibh', 'tromhpa'];

var all_prepositions = [aig, air, ann, as1, bho, de, do1, fo, gu, le, mu, o, ri, ro, thar, tro];
var all_strings = ['aig', 'air', 'ann', 'as1', 'bho', 'de', 'do1', 'fo', 'gu', 'le', 'mu', 'o', 'ri', 'ro', 'thar', 'tro'];




if (localStorage.getItem("streak") === null) {
  	var streak = 0
} else {
	var streak = window.localStorage.getItem('streak')
}

if (localStorage.getItem("high_score") === null) {
  	var high_score = 0
} else {
	var high_score = window.localStorage.getItem('high_score')
}

var hintno = 0;
//var prepositions = savedata() 
var prepositions = [air];
//var prepositions = [aig, air, ann, as1, bho, de, do1, fo, gu, le, mu, o, ri, ro, thar, tro];
var pronouns = ['pronoun', 'mi', 'thu', 'e', 'i', 'sinn', 'sibh', 'iad'];
//var a = getCombo();
//preposition1 = a[0]
//pronoun1 = a[1]


//const preposition = document.querySelector('preposition');
//preposition.textContent = preposition1;
//const pronoun = document.querySelector('pronoun');
//pronoun.textContent = pronoun1;

</script>
</div>
</center>
</div>
<br><br>
<br><br>
<br><br>
<div id="footerdiv">
<iframe id="footer" src="footer.htm" frameBorder="0" scrolling="no"></iframe>
</div>
</body>
</html>
